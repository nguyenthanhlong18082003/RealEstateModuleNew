<odoo>
    <data>
        <record id="view_product_kanban" model="ir.ui.view">
            <field name="name">product.template.kanban</field>
            <field name="model">product.template</field>
            <field name="arch" type="xml">
                <kanban sample="1">
                    <field name="id" />
                    <field name="product_variant_count" />
                    <field name="currency_id" />
                    <field name="isDuplicate" />
                    <field name="activity_state" />
                    <field name="categ_id" />
                    <progressbar field="activity_state"
                        colors="{&quot;planned&quot;: &quot;success&quot;, &quot;today&quot;: &quot;warning&quot;, &quot;overdue&quot;: &quot;danger&quot;}" />
                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_card oe_kanban_global_click">
                                <widget invisible='isDuplicate' name="web_ribbon" title="Gốc"
                                    bg_color="bg-success"
                                />
                                <widget name="web_ribbon" invisible='not isDuplicate' title="Bán"
                                    bg_color="bg-info"
                                />
                                <div class="o_kanban_image me-1">
                                    <img
                                        t-att-src="kanban_image('product.template', 'image_128', record.id.raw_value)"
                                        alt="Product" class="o_image_64_contain" />
                                </div>
                                <div class="oe_kanban_details">
                                    <div class="o_kanban_record_top mb-0">
                                        <div class="o_kanban_record_headings">
                                            <strong class="o_kanban_record_title">
                                                <field name="name" />
                                            </strong>
                                        </div>
                                        <field name="priority" widget="priority" />
                                    </div>
                                    <t t-if="record.default_code.value">[<field name="default_code" />
                                        ]</t>
                                    <div t-if="record.product_variant_count.value &gt; 1"
                                        groups="product.group_product_variant">
                                        <strong>
                                            <t t-esc="record.product_variant_count.value" />
                                            Variants </strong>
                                    </div>
                                    <div name="product_lst_price" class="mt-1"> Giá: <field
                                            name="offer_price" widget="monetary"
                                            options="{'currency_field': 'currency_id', 'field_digits': True}" />
                                    </div>
                                    <div>
                                        <field name="product_properties" widget="properties" />
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record id="view_product" model="ir.ui.view">
            <field name="name">product.template.from</field>
            <field name="model">product.template</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <field name="isDuplicate" invisible="1" />
                        <field name="isApprove" invisible="1" />
                        <field name="isReadonly" invisible="1" />
                        <div invisible="isDuplicate">
                            <field name="isFollow" invisible="1" />
                            <widget name="web_ribbon" title="Chờ duyệt"
                                bg_color="bg-success"
                                invisible="not isFollow" />
                            <field name="image_1920" widget="image" class="oe_avatar"
                                options="{'preview_image': 'image_128','size':[250,250]}"
                                field_id="image_1920_0" />
                            <div class="oe_title">
                                <label for="name" string="Dự án" />
                                <h1>
                                    <div class="d-flex">
                                        <field name="priority" widget="priority" class="me-3"
                                            field_id="priority_0" />
                                        <field class="text-break" name="name"
                                            readonly="isReadonly"
                                            options="{'line_breaks': False}" widget="text"
                                            placeholder="Tên dự án" on_change="1"
                                            field_id="name_0" />
                                    </div>
                                    <div>
                                        <button name="action_create_sale_product" type="object"
                                            string="Tạo sản phẩm bán" class="btn btn-primary"
                                            invisible="not isApprove" />
                                    </div>
                                    <div>
                                    </div>
                                </h1>
                            </div>
                            <notebook>
                                <page string="Thông tin chung">
                                    <group>
                                        <group>
                                            <span class="o_form_label o_td_label"
                                                name="address_name">
                                                <b>Địa chỉ</b>
                                            </span>
                                            <div class="o_address_format">
                                                <!-- <field name="street"
                                                    class="o_address_street"
                                                />
                                                <field name="ward_id" class="o_address_state"
                                                    options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True, &quot;no_edit&quot;: True}" />
                                                <field name="district_id" class="o_address_state"
                                                    options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True, &quot;no_edit&quot;: True}" />
                                                <field name="province_id" class="o_address_zip w-100"
                                                    options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True, &quot;no_edit&quot;: True}" /> -->
                                                <field name="street" placeholder="Đường"
                                                    readonly="isReadonly"
                                                    class="o_address_street" />
                                                <field name="alley" placeholder="Ngõ, số nhà"
                                                    invisible="not isApprove"
                                                    readonly="isReadonly"
                                                    class="o_address_street_so" />
                                                <field name="ward_id" placeholder="Phường xã"
                                                    readonly="isReadonly" />
                                                <field name="district_id"
                                                    placeholder="Quận huyện"
                                                    readonly="isReadonly" />
                                                <field name="state_id" class="o_address_state"
                                                    readonly="isReadonly"
                                                    placeholder="City"
                                                    options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"
                                                    context="{'country_id': country_id, 'default_country_id': country_id}" />
                                                <div name="partner_address_country"
                                                    class="d-flex justify-content-between">
                                                    <field name="country_id"
                                                        placeholder="Country"
                                                        readonly="isReadonly"
                                                        class="o_address_country"
                                                        options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}" />
                                                </div>
                                            </div>
                                            <field name="supp_ggmap"
                                                placeholder="Nhập đường link"
                                                readonly="isReadonly" />
                                        </group>
                                    </group>
                                    <group string="Thông tin chi tiết">
                                        <group>
                                            <field name="product_type_id"
                                                readonly="isReadonly"
                                                options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}">
                                                <tree>
                                                    <field name="name" />
                                                    <!-- <field name="image" widget="image" /> -->
                                                </tree>
                                            </field>
                                            <field name="acreage" placeholder="Diện tích"
                                                readonly="isReadonly" />
                                            <field name="real_acreage"
                                                placeholder="Diện tích thật"
                                                readonly="isReadonly" />
                                            <field name="way_in" placeholder="Ngõ vào"
                                                readonly="isReadonly" />
                                            <field name="facade" placeholder="Mặt tiền"
                                                readonly="isReadonly" />
                                            <field name="real_length" placeholder="Chiều dài"
                                                readonly="isReadonly" />
                                            <field name="real_width" placeholder="Chiều rộng"
                                                readonly="isReadonly" />
                                        </group>
                                        <group>
                                            <field name="nums_bedrooms"
                                                placeholder="Số phòng ngủ"
                                                readonly="isReadonly" />
                                            <field name="nums_bath" placeholder="Số nhà vệ sinh"
                                                readonly="isReadonly" />
                                            <field name="floors" placeholder="Số tầng"
                                                readonly="isReadonly" />
                                            <field name="interior" placeholder="Nội thất"
                                                readonly="isReadonly" />
                                            <field name="direction_id" readonly="isReadonly"
                                                options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}">
                                                <tree>
                                                    <field name="name" />
                                                    <!-- <field name="image" widget="image" /> -->
                                                </tree>
                                            </field>
                                            <field name="balcony" placeholder="Số ban công"
                                                readonly="isReadonly" />
                                        </group>
                                    </group>
                                    <group string="Thông tin mô tả">
                                        <field colspan="2" name="description" nolabel="1"
                                            placeholder="Nhập nội dung..." />
                                    </group>
                                    <group string="Thông tin giá">
                                        <group>
                                            <field name="offer_price"
                                                string="Giá chào hợp đồng (Triệu VND)"
                                                readonly="isReadonly" />
                                            <field name="close_price"
                                                string="Giá chốt (Triệu VND)"
                                                readonly="isReadonly" />
                                            <field name="bonus_money_percent"
                                                string="% Hoa hồng (Triệu VND)"
                                                readonly="isReadonly" />
                                            <field name="bonus_money" string="Hoa hồng"
                                                readonly="isReadonly" />
                                        </group>
                                        <field name="sale_ok" invisible="1"></field>
                                        <!-- <group name="product_template_images"
                                            string="Extra Product Media" invisible="not sale_ok">

                                        </group> -->
                                    </group>
                                    <button name="action_follow_product" type="object"
                                        class="btn btn-primary">Quan tâm</button>
                                </page>
                                <page string="Thông tin mật" invisible="not isApprove"
                                >
                                    <group string="Thông tin liên hệ">
                                        <group>
                                            <field name="sell_name" string="Tên chủ nhà"
                                                readonly="isReadonly" />
                                            <field name="sell_phone" string="Số điện thoại"
                                                readonly="isReadonly" />
                                        </group>
                                    </group>
                                    <!-- <div
                                        class="o_horizontal_separator mt-4 mb-3 text-uppercase fw-bolder small">
                                        Thông tin pháp lý
                                    </div> -->
                                    <group string="Thông tin pháp lý">
                                        <field name="multiple_images" widget="many2many_binary"
                                            string="Ảnh sổ đỏ"
                                            options="{'multiple': true}"
                                            groups="RealEstateModuleNew.group_people_dauchu,RealEstateModuleNew.group_people_chunha">
                                            <tree>
                                                <field name="name" />
                                                <field name="mimetype" />
                                                <field name="datas" widget="image"
                                                    options="{'image_size': [1000, 1000]}" />
                                            </tree>
                                        </field>
                                        <!-- <field name="additional_images_2"
                                            widget="many2many_binary" string="Ảnh chi tiết"
                                            options="{'multiple': true}">
                                            <tree>
                                                <field name="name" />
                                                <field name="mimetype" />
                                                <field name="datas" widget="image"
                                                    options="{'image_size': [1000, 1000]}" />
                                            </tree>
                                        </field> -->

                                        <field name="image_hopdong" widget="image"
                                            class="oe_hopdong"
                                            groups="RealEstateModuleNew.group_people_dauchu,RealEstateModuleNew.group_people_chunha" />

                                        <field name="product_template_image_ids"
                                            groups="RealEstateModuleNew.group_people_dauchu,RealEstateModuleNew.group_people_chunha"
                                            class="o_website_sale_image_list"
                                            context="{'default_name': name}" mode="kanban"
                                            add-label="Thêm ảnh chi tiết" nolabel="1">
                                            <kanban string="Product Images"
                                                default_order="sequence">
                                                <field name="id" />
                                                <field name="name" />
                                                <field name="image_1920" />
                                                <field name="sequence" widget="handle" />
                                                <templates>
                                                    <t t-name="kanban-box">
                                                        <div
                                                            class="card oe_kanban_global_click p-0">
                                                            <div class="o_squared_image">
                                                                <img class="card-img-top"
                                                                    t-att-src="kanban_image('product.image', 'image_1920', record.id.raw_value)"
                                                                    t-att-alt="record.name.value" />
                                                            </div>
                                                            <div class="card-body p-0">
                                                                <h4
                                                                    class="card-title p-2 m-0 bg-200">
                                                                    <small>
                                                                        <field name="name" />
                                                                    </small>
                                                                </h4>
                                                            </div>
                                                            <t
                                                                t-if="record.image_1920.raw_value.length &lt; 100*1000">
                                                                <t t-set="size_status"
                                                                    t-value="'text-bg-success'" />
                                                                <t t-set="message">Acceptable
                                                                    file size</t>
                                                            </t>
                                                            <t
                                                                t-elif="record.image_1920.raw_value.length &lt; 1000*1000">
                                                                <t t-set="size_status"
                                                                    t-value="'text-bg-warning'" />
                                                                <t t-set="message">Huge file
                                                                    size. The image should be
                                                                    optimized/reduced.</t>
                                                            </t>
                                                            <t t-else="1">
                                                                <t t-set="size_status"
                                                                    t-value="'text-bg-danger'" />
                                                                <t t-set="message">Optimization
                                                                    required! Reduce the image
                                                                    size or increase your
                                                                    compression settings.</t>
                                                            </t>
                                                            <span
                                                                t-attf-class="badge #{size_status} o_product_image_size"
                                                                t-esc="record.image_1920.value"
                                                                t-att-title="message" />
                                                        </div>
                                                    </t>
                                                </templates>
                                            </kanban>
                                        </field>
                                    </group>
                                </page>
                                <page string="Người theo dõi"
                                    groups="RealEstateModuleNew.group_people_dauchu">
                                    <group>
                                        <field name="name" />
                                        <!-- Hiển thị danh sách người theo dõi -->
                                        <field name="follower_ids"
                                            domain="[('product_id' , '=' , id)]" readonly="1">

                                            <tree string="Followers" delete="1">
                                                <field name="create_uid" />
                                                <field name="is_approved" />

                                                <button name="action_approve" type="object"
                                                    string="Duyệt"
                                                    invisible="is_approved"
                                                    class="btn-primary" />
                                                <button name="action_reject" type="object"
                                                    string="Từ chối"
                                                    class="btn-danger"
                                                    attrs="{'invisible': [('can_view_details', '=', False)]}"
                                                    confirm="Bạn có chắc chắn muốn từ chối yêu cầu này?" />
                                            </tree>
                                        </field>
                                    </group>
                                </page>
                                <page string="Người được duyệt"
                                    groups="RealEstateModuleNew.group_people_dauchu">
                                    <group>
                                        <!-- <field name="name" /> -->
                                        <!-- Hiển thị danh sách người theo dõi -->
                                        <field name="follower_2_ids" readonly="1"
                                            domain="[('product_id' , '=' , id)]">
                                            <tree string="Followers" editable="bottom">
                                                <field name="create_uid" />
                                                <field name="is_approved" />
                                                <button name="action_reject" type="object"
                                                    string="Hủy duyệt"
                                                    class="btn-danger"
                                                    attrs="{'invisible': [('can_view_details', '=', False)]}"
                                                    confirm="Bạn có chắc chắn muốn hủy yêu cầu này?" />
                                            </tree>
                                        </field>
                                    </group>
                                </page>
                                <page string="Thông tin bán" invisible="not isApprove">

                                    <field name="sale_product_ids"
                                        widget="one2many_list">
                                        <tree create="False">
                                            <!-- <field name="id"/> -->
                                            <field name="product_template_id" />
                                            <field name="offer_price" />
                                            <field name="close_price" />
                                            <button type="object"
                                                name="action_go_to_website"
                                                string="Go to Website"
                                                class="btn-primary" />

                                            <!-- <button name="action_reject" type="object"
                                            string="Xóa"
                                            class="btn-danger"
                                            attrs="{'invisible': [('can_view_details', '=', False)]}"
                                            confirm="Bạn có chắc chắn muốn hủy yêu cầu này?" /> -->
                                        </tree>
                                    </field>
                                </page>
                            </notebook>
                        </div>
                        <div invisible="not isDuplicate">
                            <group>
                                <button type="object"
                                    name="action_go_to_website"
                                    string="Go to Website"
                                    class="btn-primary" />
                            </group>
                            <group>
                                <group>
                                    <field name="product_parent"
                                        context="{'form_view_ref':'RealEstateModuleNew.view_product'}" />
                                    <span class="o_form_label o_td_label" name="address_name">
                                        <b>Địa chỉ</b>
                                    </span>
                                    <div class="o_address_format">
                                        <!-- <field name="street"
                                                        class="o_address_street"
                                                    />
                                                    <field name="ward_id" class="o_address_state"
                                                        options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True, &quot;no_edit&quot;: True}" />
                                                    <field name="district_id" class="o_address_state"
                                                        options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True, &quot;no_edit&quot;: True}" />
                                                    <field name="province_id" class="o_address_zip w-100"
                                                        options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True, &quot;no_edit&quot;: True}" /> -->
                                        <field name="street" placeholder="Đường"
                                            class="o_address_street" />
                                        <field name="alley" placeholder="Ngõ, số nhà"
                                            class="o_address_street_so" />
                                        <field name="ward_id" placeholder="Phường xã"
                                        />
                                        <field name="district_id" placeholder="Quận huyện"
                                        />
                                        <field name="state_id" class="o_address_state"
                                            placeholder="City"
                                            options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"
                                            context="{'country_id': country_id, 'default_country_id': country_id}" />
                                        <div name="partner_address_country"
                                            class="d-flex justify-content-between">
                                            <field name="country_id" placeholder="Country"
                                                class="o_address_country"
                                                options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}" />
                                        </div>
                                    </div>
                                    <field name="supp_ggmap" placeholder="Nhập đường link"
                                    />
                                </group>
                            </group>
                            <group string="Thông tin mô tả">
                                <field colspan="2" name="description" nolabel="1"
                                    placeholder="Nhập nội dung..." />
                            </group>
                            <group string="Thông tin chi tiết">
                                <group>
                                    <field name="product_type_id"
                                        options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}">
                                        <tree>
                                            <field name="name" />
                                            <!-- <field name="image" widget="image" /> -->
                                        </tree>
                                    </field>
                                    <field name="acreage" placeholder="Diện tích"
                                    />
                                    <field name="real_acreage" placeholder="Diện tích thật"
                                    />
                                    <field name="way_in" placeholder="Ngõ vào"
                                    />
                                    <field name="facade" placeholder="Mặt tiền"
                                    />
                                    <field name="real_length" placeholder="Chiều dài"
                                    />
                                    <field name="real_width" placeholder="Chiều rộng"
                                    />
                                </group>
                                <group>
                                    <field name="nums_bedrooms" placeholder="Số phòng ngủ"
                                    />
                                    <field name="nums_bath" placeholder="Số nhà vệ sinh"
                                    />
                                    <field name="floors" placeholder="Số tầng"
                                    />
                                    <field name="interior" placeholder="Nội thất"
                                    />
                                    <field name="direction_id"
                                        options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}">
                                        <tree>
                                            <field name="name" />
                                            <!-- <field name="image" widget="image" /> -->
                                        </tree>
                                    </field>
                                </group>
                            </group>
                            <group string="Thông tin giá">
                                <group>
                                    <field name="offer_price"
                                        string="Giá chào hợp đồng (Triệu VND)"
                                    />
                                    <field name="close_price" string="Giá chốt (Triệu VND)"
                                    />
                                    <field name="bonus_money_percent"
                                        string="% Hoa hồng (Triệu VND)" />
                                    <field name="bonus_money" string="Hoa hồng"
                                    />
                                    <field name="create_uid" string="Tài khoản đã tạo"
                                        groups="RealEstateModuleNew.group_people_dauchu,RealEstateModuleNew.group_people_daukhach"
                                        readonly="1" />
                                </group>
                            </group>
                            <group>
                                <!-- <field name="additional_images_2"
                                    widget="many2many_binary" string="Ảnh chi tiết"
                                    options="{'multiple': true}">
                                    <tree>
                                        <field name="name" />
                                        <field name="mimetype" />
                                        <field name="datas" widget="image"
                                            options="{'image_size': [1000, 1000]}" />
                                    </tree>
                                </field> -->
                                <field name="product_template_image_ids"
                                    class="o_website_sale_image_list"
                                    context="{'default_name': name}" mode="kanban"
                                    add-label="Thêm ảnh chi tiết" nolabel="1">
                                    <kanban string="Product Images"
                                        default_order="sequence">
                                        <field name="id" />
                                        <field name="name" />
                                        <field name="image_1920" />
                                        <field name="sequence" widget="handle" />
                                        <templates>
                                            <t t-name="kanban-box">
                                                <div
                                                    class="card oe_kanban_global_click p-0">
                                                    <div class="o_squared_image">
                                                        <img class="card-img-top"
                                                            t-att-src="kanban_image('product.image', 'image_1920', record.id.raw_value)"
                                                            t-att-alt="record.name.value" />
                                                    </div>
                                                    <div class="card-body p-0">
                                                        <h4
                                                            class="card-title p-2 m-0 bg-200">
                                                            <small>
                                                                <field name="name" />
                                                            </small>
                                                        </h4>
                                                    </div>
                                                    <t
                                                        t-if="record.image_1920.raw_value.length &lt; 100*1000">
                                                        <t t-set="size_status"
                                                            t-value="'text-bg-success'" />
                                                        <t t-set="message">Acceptable
                                                            file size</t>
                                                    </t>
                                                    <t
                                                        t-elif="record.image_1920.raw_value.length &lt; 1000*1000">
                                                        <t t-set="size_status"
                                                            t-value="'text-bg-warning'" />
                                                        <t t-set="message">Huge file
                                                            size. The image should be
                                                            optimized/reduced.</t>
                                                    </t>
                                                    <t t-else="1">
                                                        <t t-set="size_status"
                                                            t-value="'text-bg-danger'" />
                                                        <t t-set="message">Optimization
                                                            required! Reduce the image
                                                            size or increase your
                                                            compression settings.</t>
                                                    </t>
                                                    <span
                                                        t-attf-class="badge #{size_status} o_product_image_size"
                                                        t-esc="record.image_1920.value"
                                                        t-att-title="message" />
                                                </div>
                                            </t>
                                        </templates>
                                    </kanban>
                                </field>
                            </group>
                        </div>
                    </sheet>
                </form>

            </field>
        </record>

        <record id="action_product_template" model="ir.actions.act_window">
            <field name="name">Bất động sản đầu chủ</field>
            <field name="res_model">product.template</field>
            <field name="view_mode">kanban,form,tree</field>
            <!-- <field name="view_id" ref="view_product"></field> khi chạy nó sẽ chỉ đến form
            view_product đầu tiên -->
            <field name="view_ids"
                eval="[(5, 0, 0), (0, 0, {'view_mode': 'kanban', 'view_id': ref('view_product_kanban')}), (0, 0, {'view_mode': 'form', 'view_id': ref('view_product')})]" />

        </record>
    </data>

</odoo>